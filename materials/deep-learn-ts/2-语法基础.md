# 语法基础

## 概述

1. ts 类型系统的主要功能：

- 类型系统被设计是可选的
- ts 不会阻止 JS 的运行

2. 基本注解

**类型注解使用:TypeAnnotation 语法，在类型声明空间中可用的任何内容都可以用作类型注解。**

JavaScript 原始类型也同样适应于 TypeScript 的类型系统，因此 string、number、boolean 也可以被用作类型注解

3. 接口，**是 ts 的一个核心知识，它能合并众多类型声明至一个类型声明。**

4. 内联类型注解，与创建一个接口不同，可以使用内联注解语法注解任何内容：:{/_ structure _/}

5. any 类型在 TypeScript 类型系统中占有特殊的地位。它提供给你一个类型系统的「后门」,TypeScript 将会把类型检查关闭。在类型系统里 any 能够兼容所有的类型（包括它自己）。因此，所有类型都能被赋值给它，它也能被赋值给其他任何类型

**必须减少对 any 的使用依赖，需要确保类型安全。**

6. null 和 undefined

在类型系统中，JavaScript 中的 null 和 undefined 字面量和其他被标注了 any 类型的变量一样，都能被赋值给任意类型的变量

7. void，使用:void 表示一个函数没有一个返回值。

8. 泛型

在计算机科学中，许多算法和数据结构并不会依赖于对象的实际类型，但是，你仍然会想在每个变量里强制提供约束。

9. 联合类型，处理属性为多种类型之一的场景。

10. 交叉类型

11. 元组类型，使用:[type1, type2]的形式，为元组添加类型注解，元组可以包含任意数量的成员。

12. 类型别名

与接口不同，可以为任意的类型注解提供类型别名。

### 要点

1. 如果需要使用类型注解的层次结构，建议使用接口，它能使用 implements 和 extends

2. 为一个简单的对象类型使用类型别名，只需要给它一个语义化的名字即可。

3. 给联合类型和交叉类型一个语义化的名称时，建议使用类型别名。

## 从 JavaScript 迁移

1. 一般来说，将 JavaScript 代码迁移至 typescript 的步骤：

- 添加一个 tsconfig.json 文件
- 把文件扩展名从.js 改成.ts，开始使用 any 来减少错误
- 开始在 typescript 中写代码，尽可能的减少 any 的使用
- 回到源代码，开始添加类型注解，并修复已识别的错误。
- 为第三方 JavaScript 代码定义环境声明。

**记住：所有的 JavaScript 代码都是有效的 typescript 代码。**

2. 第三方代码，建议你以创建一个 vendor.d.ts 文件作为开始（.d.ts 文件扩展名指定这个文件是一个声明文件），然后我向文件里添加东西

3. 第三方的 npm 模块

可以快速的定义一个全局模块：

```ts
declare module 'jquery';

import * as $ from 'jquery';
```

## @types

1. @types 支持全局和模块类型定义

2. 全局@types

- 默认情况下，typescript 自动包含支持全局使用的任何声明定义。

3. 控制全局

对有些团队来说，拥有允许全局使用的定义是一个问题，可以通过配置 tsconfig.json 的 compilerOptions.types 选型，引入有意义的类型：

```json
{
  "compilerOptions": {
    "types": {
      "jquery"
    }
  }
}
```

通过配置 compilerOptions.types: [ "jquery" ] 后，只允许使用 jquery 的 @types 包，即使这个人安装了另一个声明文件，比如 npm install @types/node，它的全局变量（例如 process）也不会泄漏到你的代码中，直到你将它们添加到 tsconfig.json 类型选项。

## 环境声明

1. typescript 的设计目标之一是让你在 typescript 中安全、轻松地使用现有的 JavaScript 库，**typescript 通过声明文件来做到这一点。**

2. 学习第三方 JavaScript 库编写环境声明，是一种为 typescript 写注解比较好的实践方式。

### 声明文件

1. 你可以通过 declare 关键字来告诉 TypeScript，你正在试图表述一个其他地方已经存在的代码。

2. 你可以选择把这些声明放入 .ts 或者 .d.ts 里。在你实际的项目里，我们强烈建议你应该把声明放入独立的 .d.ts 里（可以从一个命名为 global.d.ts 或者 vendor.d.ts 文件开始）。

3. 如果一个文件有扩展名.d.ts，这意味着每个跟级别的声明都必须以 declare 关键字作为前缀。

**这有利于让开发者清楚的知道，在这里 typescript 将不会把它编译成任何代码，同时开发者需要确保这些在编译时存在。**

- 环境声明就好像你与编译器之间的一个约定，如果在编译时它们不存在，但是你却使用了它们，程序将会在没有警告的情况下中断。
- 环境声明就好像是一个文档，如果源文件更新了，你应该同步更新。**所以，当你在运行时有新的行为时，如果没有去更新环境声明，编译器将会报错。**
