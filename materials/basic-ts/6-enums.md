# 枚举

1. 枚举，表示一个被命名的整型常数的集合。

2. 枚举相对于 JavaScript 来说是特有的语法。

3. enum 是一种比较特殊的类型，它兼具值和类型于一体，类比 class。

```ts
enum Day {
  SUNDAY,
  MONDAY,
  TUESDAY,
  WEDNESDAY,
  THURSDAY,
  FRIDAY,
  SATURDAY,
}
```

如上，这里的 Day 既可以表示集合，也可以表示集合的类型，所有成员(enum member)的类型都是 Day 的子类型。

4. 7 种常见的枚举类型：

- 数字类型；
- 字符串类型；
- 异构类型；
- 常量成员和计算成员；
- 枚举成员类型和联合枚举；
- 常量枚举；
- 外部枚举。

## 数字枚举

1. 在仅仅指定常量命名的情况下，我们定义的就是⼀个默认从 0 开始递增的数字集合，称之为数字枚举。

2. **由于枚举默认的值自递增且完全无法保证稳定性，** 所以给部分数字类型的枚举成员显式指定数值或给函数传递数值而不是枚举类型作为入参都属于不明智的行为。

3. 常量命名、结构顺序都⼀致的两个枚举，即便转译为 JavaScript 后，同名成员的值仍然⼀样（满⾜恒等 === ）。但在 TypeScript 看来，它们不相同、不满⾜恒等。

4. 不仅仅是数字类型枚举，所有其它枚举都仅和自身兼容，这就消除了由于枚举不稳定性可能造成的⻛险，所以这是⼀种极其安全的设计。

这可能会使得枚举变得不那么好⽤，因为不同枚举之间完全不兼容，所以不少 TypeScript 编程⼈员觉得枚举类型是⼀种⼗分鸡肋的类型。⽽两个结构完全⼀样的枚举类型如果互相兼容，则会更符合我们的预期。

可以使用类型断言(as)或**重构代码将“相同”的枚举类型抽离为同一个公共的枚举，推荐后者。**

## 字符串枚举

1. 在 TypeScript 中，我们将定义值是字符串字⾯量的枚举称之为字符串枚举，字符串枚举转译为 JavaScript 之后也将保持这些值。

2. 相⽐于没有明确意义的递增值的数字枚举，字符串枚举的成员在运⾏和调试阶段，更具备明确的含义和可读性，枚举成员的值就是我们显式指定的字符串字⾯量。

## 异构枚举(heterogeneous enums)

1. 从技术上来讲，TypeScript ⽀持枚举类型同时拥有数字和字符类型的成员，这样的枚举被称之为异构枚举。

## 常量成员和计算值成员

1. 在转译时，通过被计算的常量枚举表达式定义值的成员，也被称作常量成员，⽐如如下⼏种情况：

- 引⽤来⾃预先定义的常量成员，⽐如来⾃当前枚举或其他枚举；
- 圆括弧 () 包裹的常量枚举表达式；
- 在常量枚举表达式上应⽤的⼀元操作符 +、 -、~ ；
- 操作常量枚举表达式的⼆元操作符 +、-、\*、/、%、<<、>>、>>>、&、|、^。

2. 需要记住缺省值（从 0 递增）、数字字⾯量、字符串字⾯量肯定是常量成员就够了。

## 枚举成员类型和联合枚举

1. 对于不需要计算（值）的常量类型成员，即缺省值（从 0 递增）、数字字⾯量、字符串字⾯量这三种情况（这就是为什么我们只需记住这三种情况），被称之为字⾯量枚举成员。

2. 枚举的枚举值和类型是一体的，枚举成员的类型是枚举类型的子类型。

3. 枚举成员和枚举类型之间的关系分两种情况： 如果枚举的成员同时包含字⾯量和⾮字⾯量枚举值，枚举成员的类型就是枚举本身（枚举类型本身也是本身的⼦类型）；如果枚举成员全部是字⾯量枚举值，则所有枚举成员既是值⼜是类型。

4. 联合类型使得 TypeScript 可以更清楚地枚举集合⾥的确切值，从⽽检测出⼀些永远不会成⽴的条件判断（俗称 Dead Code）。

5. **字面量类型所具有的类型推断、类型缩小的特性，同样适应于字面量枚举类型。**

## 常量枚举(const enums)

1. 枚举的作⽤在于定义被命名的常量集合，⽽ TypeScript 提供了⼀些途径让枚举更加易⽤，⽐如常量枚举。

2. 可以通过添加 const 修饰符定义常量枚举，常量枚举定义转译为 JavaScript 之后会被移除，并在使⽤常量枚举成员的地⽅被替换为相应的内联值，因此常量枚举的成员都必须是常量成员（字⾯量 + 转译阶段可计算值的表达式）。

3. 使⽤常量枚举不仅能减少转译后的 JavaScript 代码量（因为抹除了枚举定义），还不需要到上级作⽤域⾥查找枚举定义（因为直接内联了枚举值字⾯量）。

4. 通过定义常量枚举，我们可以以清晰、结构化的形式维护相关联的常量集合，⽐如 switch case 分⽀，使得代码更具可读性和易维护性。⽽且因为转译后抹除了定义、内联成员值，所以在代码的体积和性能⽅⾯并不会⽐直接内联常量值差。

## 外部枚举(Ambient enums)

1. 在 TS 中，可以通过 declare 描述一个在其它地方已经定义过的变量。

2. 也可以使⽤ declare 描述⼀个在其他地⽅已经定义过的枚举类型，通过这种⽅式定义出来的枚举类型，被称之为外部枚举

3. 外部枚举和常规枚举的差异在于以下⼏点：

- 在外部枚举中，如果没有指定初始值的成员都被当作计算（值）成员，这跟常规枚举恰好相反；
- 即便外部枚举只包含字⾯量成员，这些成员的类型也不会是字⾯量成员类型，⾃然完全不具备字⾯量类型的各种特性。

4. 外部枚举的作⽤在于为两个不同枚举（实际上是指向了同⼀个枚举类型）的成员进⾏兼容、⽐较、被复⽤提供了⼀种途径，这在⼀定程度上提升了枚举的可⽤性，让其显得不那么“鸡肋”。

## 要点

1. 使⽤常量枚举管理相关的常量，能提⾼代码的可读性和易维护性；

2. 不要使⽤其他任何类型替换所使⽤的枚举成员；

3. 枚举有什么特性？常量枚举有什么特性？

4. declare 的作⽤，主要是⽤在 _.d.ts 类型声明⽂件⾥（在 _.d.ts ⾥也只能使⽤外部枚举），在不显式引⼊定义枚举的模块情况下，就可以直接使⽤该枚举类型。
