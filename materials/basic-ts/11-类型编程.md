# 类型编程

## 类型物料

### 泛型

1. ⼯具类型的本质就是构造复杂类型的泛型。

如果⼀个⼯具类型不能接受类型⼊参，那么它和普通的类型别名⼜有什么区别？因此，使⽤泛型进⾏变量抽离、逻辑封装其实就是在造类型的轮⼦。

### 条件类型

1. TypeScript ⽀持使⽤三元运算的条件类型，它可以根据 ？前⾯的条件判断返回不同的类型。同时，三元运算还⽀持嵌套。

**在三元运算的条件判断逻辑中，主要使用 extends 关键字判断两个类型的子类型关系。**

#### 分配条件类型(Distributive Conditional Types)

1. 在条件类型中，如果⼊参是联合类型，则会被拆解为⼀个个独⽴的（原⼦）类型（成
   员），然后再进⾏类型运算。

**注意：包含条件类型的泛型接收 never 作为泛型⼊参时，存在⼀定“陷阱”**

never 是所有类型的子类型。

### 条件类型中的类型推断 infer

可以在条件类型中使⽤类型推断操作符 infer 来获取类型⼊参的组成部分，⽐如说获取数组类型⼊参⾥元素的类型。

1. 可以通过 infer 创建任意个类型推断参数，以此获取任意的成员类型。

### 索引访问类型

索引访问类型其实更像是获取物料的⽅式，⾸先我们可以通过属性名、索引、索引签名按需提取对象（接⼝类型）任意成员的类型（注意：只能使⽤ [索引名] 的语法）

### keyof

1. 使用 keyof 提取对象属性名，索引名，索引签名类型。

### typeof

1. 在表达式上下文使用，是用来获取表达式的类型。

2. 如果在类型上上下文使用，则是获取变量或属性的类型。

3. 在 TypeScript 中，typeof 的主要⽤途是在类型上下⽂中获取变量或者属性的类型。

4. **对于任何未显式添加类型注解或值与类型注解⼀体（⽐如函数、类）的变量或属性，我们都可以使⽤ typeof 提取它们的类型，这是⼀个⼗分⽅便、有⽤的设计**

### 映射类型

1. 可以使用索引签名语法和 in 关键字限定对象属性的范围。

**注意：我们只能在类型别名定义中使⽤ in，如果在接⼝中使⽤，则会提示⼀个 ts(1169) 的错误。**

2. 在定义类型时，我们可以组合使⽤ in 和 keyof，并基于已有的类型创建⼀个新类型，使得新类型与已有类型保持⼀致的只读、可选特性，这样的泛型被称之为映射类型。

**注意：in 和 keyof 也只能在类型别名定义中组合使⽤。**

### 使用 as 重新映射 key

1. ⾃ TypeScript 4.1 起，我们可以在映射类型的索引签名中使⽤类型断⾔
